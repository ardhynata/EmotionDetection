<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Stress Level Detection</title>

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- HTMX -->
  <script src="https://unpkg.com/htmx.org@1.9.10"></script>
  <!-- Camera + frame logic -->
  <script src="/static/script.js" defer></script>

  <style>
    video {
      border-radius: 1rem;
      box-shadow: 0 6px 16px rgba(0, 0, 0, 0.25);
    }
    .scroll-hide::-webkit-scrollbar {
      width: 0;
      height: 0;
    }
    @keyframes blink-green {
      0%, 100% { background-color: #dcfce7; }
      50% { background-color: #86efac; }
    }
    @keyframes blink-red {
      0%, 100% { background-color: #fee2e2; }
      50% { background-color: #fca5a5; }
    }
    .new-row-green {
      animation: blink-green 1s ease-in-out 3;
    }
    .new-row-red {
      animation: blink-red 1s ease-in-out 3;
    }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-gray-50 to-blue-50 text-gray-800 flex flex-col items-center justify-center p-8">

  <div class="w-full max-w-7xl bg-white shadow-2xl rounded-2xl p-12">
    <h1 class="text-4xl font-bold text-center text-blue-600 mb-10">
      üßò‚Äç‚ôÇÔ∏è Mahesaca - Stress Detection
    </h1>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-start">
      <!-- Left: Camera feed -->
      <div class="flex flex-col items-center space-y-4">
        <video id="video" autoplay playsinline class="w-full max-w-xl border-4 border-blue-400"></video>
        <p class="text-gray-500 text-sm italic">
          Live camera feed ‚Äî menganalisa tingkat stress real-time...
        </p>
      </div>

      <!-- Right: Results table -->
      <div class="w-full max-w-xl mx-auto">
        <div class="border border-gray-300 rounded-xl shadow-md overflow-hidden">
          <div class="bg-blue-500 text-white text-center py-2 font-semibold">
            Hasil Deteksi
          </div>

          <div class="max-h-[450px] overflow-y-auto scroll-hide">
            <table class="min-w-full text-center">
              <thead class="bg-blue-100 sticky top-0">
                <tr class="text-gray-700 text-sm">
                  <th class="px-4 py-2 font-semibold">Waktu</th>
                  <th class="px-4 py-2 font-semibold">No Stress (%)</th>
                  <th class="px-4 py-2 font-semibold">Stress (%)</th>
                </tr>
              </thead>
              <tbody id="results-body" class="divide-y divide-gray-200 text-gray-700 text-sm"></tbody>
            </table>
          </div>
        </div>
      </div>

    <!-- Poller interval dynamically injected from Go -->
    <div id="poller"
         hx-get="/analyze-frame-html"
         hx-trigger="every {{.RefreshInterval}}s"
         hx-swap="outerHTML">
    </div>
  </div>

</body>
</html>
